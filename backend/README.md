# PentestAssistant 后端

基于Express开发的Web渗透检测助手的后端，数据库使用MongoDB。

## 使用方式

### 1. 环境配置

首先确保电脑中存在 `node.js` 环境。我们推荐使用 `pnpm`，如果未安装过，则需要使用 npm 进行全局安装。

```sh
pnpm install
```
安装MongoDB，启动MongoDB服务，并创建数据库和用户。默认的数据库名为`pentest`，用户名和密码均为`pentest`。

```sh

```javascript
db.createUser({
    user: "pentest",
    pwd: "pentest",
    roles: [{role: "readWrite", db: "pentest" }]
})
```

除此以外，我们使用三个常见Web漏洞扫描工具：`w3af`、`arachni` 和 `zaproxy`。因此部署安装这三个漏洞扫描工具，我们实现了API形式的调用方式。

```shell
docker run --name w3af -p 5000:5000 -v /home/kali/dockerDir/w3af:/home/w3af/exdir andresriancho/w3af-api
docker run --name arachni -p 7331:7331 -p 9292:9292 arachni/arachni
docker run --name zaproxy -p 7373:7373 -v /home/kali/dockerDir/zap:/home/zap/exdir owasp/zap2docker-live zap.sh -daemon -host 0.0.0.0 -port 7373 -config api.addrs.addr.name=.* -config api.addrs.addr.regex=true -config api.disablekey=true -config start.checkForUpdates=false
```

### 2. 启动服务

启动一个本地API服务器，接收来自前端的请求。可使用环境变量`PORT`来指定开启端口，默认为8003。

```sh
pnpm start
```

