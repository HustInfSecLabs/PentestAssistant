import { makeAutoObservable } from 'mobx';
import { http, createHttpAxios } from '@/utils';

class AIStore {
  constructor () {
    makeAutoObservable(this);
  }

  sendMessage = async (message) => {
    // 调用接口获取数据
    return await createHttpAxios(300000).post('/ai/query', { message });
  };

  getStatus = async () => {
    // 调用接口获取数据
    return await http.get('/ai/status');
  };

  getSummary = async ({ scanId }) => {
    // 调用接口获取数据
    return await http.post('/ai/summary', { scanId });
  };

  // 状态管理
  reportData = null;
  summarySignal = false;

  runSummary = async (values) => {
    this.summarySignal = !this.summarySignal;
    this.reportData = values;
  };

  resetSummary = () => {
    this.reportData = null;
  };
}

export default AIStore;
